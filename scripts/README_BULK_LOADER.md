# –ë–æ–µ–≤–æ–π –∑–∞–≥—Ä—É–∑—á–∏–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π

## üöÄ –ß—Ç–æ —ç—Ç–æ

`load_spells_bulk.py` - –ø—Ä–æ–¥–∞–∫—à–µ–Ω-–≥–æ—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π:

1. –ü–∞—Ä—Å–∏—Ç **—Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π** —Å https://next.dnd.su/spells/
2. –ò–∑–≤–ª–µ–∫–∞–µ—Ç **—Ä–µ–∞–ª—å–Ω—ã–µ ID –∏ slug** –∏–∑ —Å—Å—ã–ª–æ–∫
3. –ó–∞–≥—Ä—É–∂–∞–µ—Ç –¥–µ—Ç–∞–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –ø–æ –∫–∞–∂–¥–æ–º—É –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—é
4. –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

## üîß –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ó–∞–≥—Ä—É–∑–∏—Ç—å 10 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π (–¥–ª—è —Ç–µ—Å—Ç–∞)

```bash
python scripts/load_spells_bulk.py
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å 50 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π

```bash
python scripts/load_spells_bulk.py --limit 50
```

### –ó–∞–≥—Ä—É–∑–∏—Ç—å –í–°–ï –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è

```bash
python scripts/load_spells_bulk.py --all
```

‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ**: –ü–æ–ª–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å **30-60 –º–∏–Ω—É—Ç** –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π.

## üìä –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞

```
üîç –ü–∞—Ä—Å–∏–º —Å–ø–∏—Å–æ–∫ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π —Å https://next.dnd.su/spells/...
‚úÖ –ù–∞–π–¥–µ–Ω–æ 347 —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π

üìù –ü–µ—Ä–≤—ã–µ 5 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π:
  - –ì–µ—Ä–æ–∏–∑–º (ID: 10222, slug: heroism)
  - –û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä (ID: 10057, slug: fireball)
  - –í–æ–ª—à–µ–±–Ω–∞—è —Å—Ç—Ä–µ–ª–∞ (ID: 10145, slug: magic-missile)
  ...

üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É 10 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π...

[1/10] üîÑ –ì–µ—Ä–æ–∏–∑–º... ‚úÖ OK
[2/10] üîÑ –û–≥–Ω–µ–Ω–Ω—ã–π —à–∞—Ä... ‚úÖ OK
[3/10] üîÑ –í–æ–ª—à–µ–±–Ω–∞—è —Å—Ç—Ä–µ–ª–∞... ‚úÖ OK
...

============================================================
‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ: 10
‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ (—É–∂–µ –µ—Å—Ç—å): 0
‚ùå –û—à–∏–±–æ–∫: 0
============================================================
```

## ‚öñÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–°–∫—Ä–∏–ø—Ç **–ø—Ä–æ–≤–µ—Ä—è–µ—Ç** –Ω–∞–ª–∏—á–∏–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è –≤ –±–∞–∑–µ –ø–æ `external_id` –∏ **–ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç**, –µ—Å–ª–∏ –æ–Ω–æ —É–∂–µ –µ—Å—Ç—å.

### Rate Limiting

–ß—Ç–æ–±—ã –Ω–µ –ø–µ—Ä–µ–≥—Ä—É–∑–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:

- –ú–µ–∂–¥—É –∑–∞–ø—Ä–æ—Å–∞–º–∏: **0.5 —Å–µ–∫—É–Ω–¥—ã**
- –ö–∞–∂–¥—ã–µ 10 –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π: **2 —Å–µ–∫—É–Ω–¥—ã**

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ï—Å–ª–∏ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å —Å–ø–∞—Ä—Å–∏—Ç—å (404, timeout, –∏ —Ç.–¥.) - —Å–∫—Ä–∏–ø—Ç **–ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É**, –∞ –Ω–µ –ø–∞–¥–∞–µ—Ç.

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

–ü–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# API
curl "http://localhost:8000/reference/spells/search?limit=10"

# –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ
curl "http://localhost:8000/reference/search/suggestions?q=–æ–≥–æ–Ω&limit=5"

# –ë–æ—Ç
# –ù–∞–∂–∞—Ç—å "üìö –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫" –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫
```

## üí° –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **–ù–∞—á–Ω–∏—Ç–µ —Å –º–∞–ª–æ–≥–æ**: —Å–Ω–∞—á–∞–ª–∞ `--limit 10`, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å
2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –æ—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∏—Å–∫
3. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –≤—Å–µ**: `--limit 100` –∏–ª–∏ `--all`
4. **–ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫ –±–µ–∑–æ–ø–∞—Å–µ–Ω**: –¥—É–±–ª–∏–∫–∞—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

1. –ï—Å–ª–∏ –Ω–∞ next.dnd.su –µ—Å—Ç—å **–ø–∞–≥–∏–Ω–∞—Ü–∏—è** –∏–ª–∏ **lazy loading**, –º–æ–≥—É—Ç –±—ã—Ç—å –ø–æ–ª—É—á–µ–Ω—ã –Ω–µ –≤—Å–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è
2. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–∫–ª–∏–Ω–∞–Ω–∏—è –º–æ–≥—É—Ç –∏–º–µ—Ç—å **–Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É HTML**
3. –ï—Å–ª–∏ —Å–∞–π—Ç –æ–±–Ω–æ–≤–∏—Ç –≤–µ—Ä—Å—Ç–∫—É, –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è **–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞**

## üîó –°–≤—è–∑–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

- `app/parsers/dndsu_parser.py` - –¥–µ—Ç–∞–ª—å–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∑–∞–∫–ª–∏–Ω–∞–Ω–∏–π
- `app/crud_reference.py` - CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏
- `PARSER_SELECTORS.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è CSS-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤
